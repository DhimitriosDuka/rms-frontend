<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <title>Login</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
  </head>
  <body>
    <div class="container">

      <div class="row d-flex justify-content-center mt-5">
        <div class="col-4">
          <h1 class="h1">Login</h1>
          <form method="post" action="/login">
            <div class="row mt-4">
              <div class="form-group">
                <label for="username">Username</label>
                <input type="text" class="form-control" id="username" placeholder="Enter username" name="username">
              </div>
            </div>
            <div class="row mt-4">
              <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" placeholder="Password" name="password">
              </div>
            </div>
            <div class="row mt-2">
              <a href="/signup">Create account</a>
            </div>
            <div class="row">
              <a href="/main">Back to main screen</a>
            </div>
            <div class="row mt-4">
              <div class="form-group">
                <input type="submit" class="btn btn-primary w-100" value="Login">
              </div>
            </div>
          </form>

          <% if(typeof badCredentials != 'undefined') {%>
          <div class="alert alert-danger mt-4 text-center" role="alert">
            <%= badCredentials %>
          </div>
          <%}%>
        </div>
      </div>
      <% if(messages.toast) { %>
        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 5">
          <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000">
            <div class="toast-header">
              <strong class="me-auto">User created</strong>
              <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
              <%= messages.toast %>
            </div>
          </div>
        </div>
      <% } %>
    </div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"></script>
  <script>
    window.addEventListener('load', () => {
      const toastElList = [].slice.call(document.querySelectorAll('.toast'))
      const toastList = toastElList.map(function(toastEl) {
        return new bootstrap.Toast(toastEl);
      });
      toastList.forEach(toast => toast.show());
    });
  </script>
</html>