<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Delivery</title>
        <link href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    </head>
    <body>
    <%- include('./partial/navbar.ejs') %>
    <div class="container-fluid p-5">
    <!--    <div class="collapse" id="collapseExample">-->
    <!--        <div class="card card-body mb-5 border-0 shadow">-->
    <!--            <div class="row">-->
    <!--                <form method="POST" action="/menu-item">-->
    <!--                    <div class="row">-->
    <!--                        <div class="form-group col-2">-->
    <!--                            <label for="name">Name</label>-->
    <!--                            <input-->
    <!--                                    type="text"-->
    <!--                                    class="form-control style-border border-0 border-bottom"-->
    <!--                                    name="name"-->
    <!--                                    id="name"-->
    <!--                                    required-->
    <!--                            />-->
    <!--                        </div>-->

    <!--                        <div class="form-group col-2">-->
    <!--                            <label for="price">Price</label>-->
    <!--                            <input-->
    <!--                                    type="number"-->
    <!--                                    class="form-control style-border border-0 border-bottom"-->
    <!--                                    name="price"-->
    <!--                                    id="price"-->
    <!--                                    min= "0"-->
    <!--                                    value= "0"-->
    <!--                                    step=".01"-->
    <!--                                    required-->
    <!--                            />-->
    <!--                        </div>-->

    <!--                        <div class="form-group col-2">-->
    <!--                            <label for="michelinStart">Michelin stars</label>-->
    <!--                            <input-->
    <!--                                    type="number"-->
    <!--                                    class="form-control style-border border-0 border-bottom"-->
    <!--                                    name="michelinStart"-->
    <!--                                    id="michelinStart"-->
    <!--                                    min= "0"-->
    <!--                                    value= "0"-->
    <!--                                    step=".01"-->
    <!--                            />-->
    <!--                        </div>-->
    <!--                        <div class="form-group col-2">-->
    <!--                            <label for="course">Course</label>-->
    <!--                            <select class="form-select  border-0 border-bottom" aria-label="Default select example border-0 border-bottom" name="course">-->
    <!--                                <option value="HORS_DOEUVRES" selected>GRHORS DOEUVRESAM</option>-->
    <!--                                <option value="AMUSE_BOUCHE">AMUSE BOUCHE</option>-->
    <!--                                <option value="APPETIZER">APPETIZER</option>-->
    <!--                                <option value="FIRST_MAIN_DISH">FIRST MAIN DISH</option>-->
    <!--                                <option value="PALATE_CLEANSER_COURSE">PALATE CLEANSER COURSE</option>-->
    <!--                                <option value="SECOND_MAIN_DISH">SECOND MAIN DISH</option>-->
    <!--                                <option value="CHEESE_PLATE">CHEESE PLATE</option>-->
    <!--                                <option value="DESSERT">DESSERT</option>-->
    <!--                                <option value="POST_MEAL_DRINKS_AND_PASTRIES">POST MEAL DRINKS AND PASTRIES</option>-->
    <!--                            </select>-->
    <!--                        </div>-->

    <!--                        <div class="form-group col-2">-->
    <!--                            <label for="description">Description</label>-->
    <!--                            <input-->
    <!--                                    type="text"-->
    <!--                                    class="form-control style-border border-0 border-bottom"-->
    <!--                                    name="description"-->
    <!--                                    id="description"-->
    <!--                            />-->
    <!--                        </div>-->
    <!--                        <div class="form-group col-2">-->
    <!--                            <label for="type">Type</label>-->
    <!--                            <select class="form-select  border-0 border-bottom" aria-label="Default select example border-0 border-bottom" name="type">-->
    <!--                                <option value="DISH" selected>DISH</option>-->
    <!--                                <option value="BEVERAGE">BEVERAGE</option>-->
    <!--                                <option value="SANDWICH">SANDWICH</option>-->
    <!--                            </select>-->
    <!--                        </div>-->


    <!--                    </div>-->
    <!--                    <div class="row justify-content-center mt-3">-->
    <!--                        <div class="form-group col-3">-->
    <!--                            <label for="currency">Currency</label>-->
    <!--                            <select class="form-select  border-0 border-bottom" aria-label="Default select example border-0 border-bottom" name="currency">-->
    <!--                                <option value="USD" selected>USD</option>-->
    <!--                                <option value="EUR">EUR</option>-->
    <!--                                <option value="GBP">GBP</option>-->
    <!--                                <option value="AUD">AUD</option>-->
    <!--                                <option value="CAD">CAD</option>-->
    <!--                                <option value="CHF">CHF</option>-->
    <!--                                <option value="ALL">ALL</option>-->
    <!--                            </select>-->
    <!--                        </div>-->


    <!--                        <div class="form-group col-3">-->
    <!--                            <label for="category">Category</label>-->
    <!--                            <select class="form-select border-0 border-bottom" aria-label="Default select example" name="category">-->
    <!--                                <option selected value="VEGAN">VEGAN</option>-->
    <!--                                <option value="NON_VEGAN">NON VEGAN</option>-->
    <!--                                <option value="DAIRY">DAIRY</option>-->
    <!--                                <option value="DAIRY_FREE">DAIRY FREE</option>-->
    <!--                            </select>-->
    <!--                        </div>-->

    <!--                        <div class="form-group col-3">-->
    <!--                            <label for="ingredients">Ingredinets</label>-->
    <!--                            <select class="form-control style-border rounded-0 menuItems col-5 border-0 border-bottom" name="ingredients[]" id="ingredients" multiple="multiple">-->
    <!--
    <!--                            </select>-->
    <!--                        </div>-->

    <!--                        <div class="form-group col-3">-->
    <!--                            <label for="amounts">Amounts</label>-->
    <!--                            <input-->
    <!--                                    type="text"-->
    <!--                                    class="form-control style-border border-0 border-bottom"-->
    <!--                                    name="amounts"-->
    <!--                                    id="amounts"-->
    <!--                                    placeholder="Type the amounts like: amount1, amount2, ..."-->
    <!--                                    required-->
    <!--                            />-->
    <!--                        </div>-->
    <!--                    </div>-->
    <!--                    <div class="row justify-content-center mt-4">-->
    <!--                        <div class="col-4">-->
    <!--                            <button type="submit" class="btn w-100 shadow-sm">Create</button>-->
    <!--                        </div>-->
    <!--                    </div>-->
    <!--                </form>-->
    <!--            </div>-->
    <!--        </div>-->
    <!--    </div>-->



        <% if(typeof messages.error != 'undefined') {%>
            <div class="alert alert-danger" role="alert">
                <%= messages.error %>
            </div>
        <% } %>
        <% if(typeof messages.success != 'undefined') {%>
            <div class="alert alert-success" role="alert">
                <%= messages.success %>
            </div>
        <% } %>
        <table id="table" class="display">
            <thead>
            <tr>
                <th>Id</th>
                <th>Username</th>
                <th>Role</th>
                <td>Add schedule</td>
            </tr>
            </thead>
            <tbody>
            <% users.forEach(user => {%>
                <tr>
                    <td><%= user.id %></td>
                    <td><%= user.userName %></td>
                    <td><%= user.role %></td>
                    <td>
                        <a href="" class="btn d-flex justify-content-center <% if(user.role != "DELIVERY") {%> disabled <% }%>" data-toggle="modal"  data-target="#schedule<%= user.id %>">
                            <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><g><rect fill="none" height="24" width="24"/></g><g><g><path d="M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z"/></g></g></svg>
                        </a>
                    </td>
                    <div class="modal fade" id="schedule<%= user.id %>" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <form method="post" action="/user/<%= user.id %>/schedule">
                                    <div class="modal-body">
                                        <div class="row mt-2">
                                            <div class="col-6">
                                                <label>Work date
                                                    <input type="date" name="workDate" class="form-control" required>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="row mt-2">
                                            <div class="col-12">
                                                <label>Start Work Hour
                                                    <input type="datetime-local" name="startWorkHour" class="form-control" required>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="row mt-2">
                                            <div class="col-6">
                                                <label>End Work Hour
                                                    <input type="datetime-local" name="endWorkHour" class="form-control" required>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                        <input type="submit" class="btn btn-primary" value="Add schedule">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </tr>
            <% }) %>
            </tbody>
        </table>
    </div>
    </body>
    <script
            type="text/javascript"
            charset="utf8"
            src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.js"
    ></script>
    <script>
        $(document).ready(function() {
            $('#table').DataTable();
        } );
    </script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.1/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</html>

